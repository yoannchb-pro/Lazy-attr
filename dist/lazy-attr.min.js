!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";const t=["[lazy-reset]","[lazy-animation]","[lazy-animation-time]","[lazy-animation-delay]","[lazy-src]","[lazy-video]","[lazy-embed]","[lazy-animation-pointer]","[lazy-animation-function]","[lazy-animation-count]","[lazy-callback]","[lazy-srcset]"],e=["zoomin","zoomout","opacity","slide-left","slide-right","slide-bottom","slide-top","corner-top-left","corner-top-right","corner-bottom-left","corner-bottom-right","shake","rotate","blur","flip","flip-up"];window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),window.HTMLCollection&&!HTMLCollection.prototype.forEach&&(HTMLCollection.prototype.forEach=Array.prototype.forEach),window.lazyDatas={isIE:!!document.documentMode,updateURL:"https://unpkg.com/lazy-attr@latest/lib/lazy-attr.min.js",originalObserver:!0},window.lazy=function(){return{_data:window.lazyDatas,changeAnimation:function(t,e,n){let i=t.getAttribute("lazy-reset");if(i=null!=i&&null!=i,i){let i=t.getAttribute("lazy-animation");if(i&&e){let e=t.getAttribute("lazy-animation-pointer");e?document.querySelectorAll(e).forEach((function(t){t.classList.remove(i)})):t.classList.remove(i),t.removeAttribute("lazy-animation")}t.setAttribute("lazy-animation",e),n&&(window.lazy()._data.observer.unobserve(t),window.lazy()._data.observer.observe(t))}else console.warn("Lazy-attr : Cannot change animation of not lazy-reset element !")},getLastVersion:function(t){let e=new XMLHttpRequest;e.onload=function(){const n=e.responseText,i="[#version]";let o=n.substring(n.indexOf(i)+i.length);o=o.substring(o.indexOf(i)+i.length),o=o.substring(0,o.indexOf(i)),t({version:o})},e.onerror=function(){t({error:!0})},e.open("GET",window.lazyDatas.updateURL),e.send()},isIntersecting:function(t){const e=window.innerWidth,n=window.innerHeight,i=t.getBoundingClientRect();let o=!1,a=!1,r=i.top>=0&&i.top<=n,s=i.bottom>=0&&i.bottom<=n,l=i.left>=0&&i.left<=e,c=i.right>=0&&i.right<=e;return(r||s)&&(a=!0),(l||c)&&(o=!0),!(!o||!a)},isIntersectingWithoutTransform:function(t){const e=window.innerWidth,n=window.innerHeight;function i(t){const i=t.offsetParent.getBoundingClientRect(),o=i.left+t.offsetLeft,a=i.top+t.offsetTop,r=a+t.offsetHeight,s=o+t.offsetWidth;let l=!1,c=!1;if((a>=0&&a<=n||r>=0&&r<=n)&&(c=!0),(o>=0&&o<=e||s>=0&&s<=e)&&(l=!0),l&&c)return!0}const o=t.getAttribute("lazy-animation-pointer");return i(t)||null!=o&&i(document.querySelector(o))},parameters:t,animations:e,options:{root:null,rootMargin:"0px",threshold:0},version:"1.1.5",versionMatcher:"[#version]1.1.5[#version]"}},window.IntersectionObserver||(window.IntersectionObserver=function(t,e){this.callback=t,this.elements=[],this.options=e,window.lazyDatas.originalObserver=!1,this.init=function(){const e=this;function n(){const n=[];e.elements.forEach((function(t){let e=window.lazy().isIntersecting(t);n.push({target:t,isIntersecting:e})})),t(n,e)}this.listener=n;const i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame;i?function t(){n(),i(t)}():console.error("Lazy-attr : your browser do not requestAnimationFrame")},this.observe=function(t){t&&this.elements.push(t)},this.unobserve=function(t){if(t){let e=this.elements.indexOf(t);-1!=e&&this.elements.splice(e,1)}},this.init()}),window.addEventListener("load",(function(){function t(t){console.error("[ERROR] Lazy-attr : "+t)}if(window.IntersectionObserver&&window.lazy()&&window.lazyDatas){let i=new IntersectionObserver((function(e,n){e.forEach((function(e){const i=e.target;if(e.isIntersecting){function o(t,e){t.style.animationPlayState=e,t.style.webkitAnimationPlayState=e}function a(t,e){let n=null;if(window.lazy()._data.originalObserver){let n=t.getAttribute("lazy-animation");n&&e.classList.remove(n)}o(e,n),t.style.animationDuration=n,t.style.webkitAnimationDuration=n,t.style.animationDelay=n,t.style.webkitAnimationDelay=n,t.style.animationIterationCount=n,t.style.webkitAnimationIterationCount=n,t.style.animationTimingFunction=n,t.style.webkitAnimationTimingFunction=n}function r(t,e){let n=i.getAttribute("lazy-animation-time");n&&(t.style.animationDuration=n+"s",t.style.webkitAnimationDuration=n+"s");let o=i.getAttribute("lazy-animation-delay");o&&(t.style.animationDelay=o+"s",t.style.webkitAnimationDelay=o+"s");let r=i.getAttribute("lazy-animation-count");r&&(t.style.animationIterationCount=r,t.style.webkitAnimationIterationCount=r);let s=i.getAttribute("lazy-animation-function");s&&(t.style.animationTimingFunction=s,t.style.webkitAnimationTimingFunction=s),t.classList.add(e),null===i.getAttribute("lazy-reset")?t.addEventListener("animationend",(function(){a(i,t),window.lazy().parameters.forEach((function(t){t=t.replace(/\[/gi,"").replace(/\]/gi,""),i.removeAttribute(t)}))})):t.addEventListener("animationend",(function(){a(i,t)}))}const e=[];let l=i.getAttribute("lazy-animation"),c=i.getAttribute("lazy-animation-pointer");function s(){e.forEach((function(t){o(t,"running")}))}c&&l?document.querySelectorAll(c).forEach((function(t){r(t,l),o(t,"paused"),e.push(t)})):l&&(r(i,l),o(i,"paused"),e.push(i));let u=i.complete&&0!==i.naturalHeight,d=i.readyState>=0;const y=()=>{const t=i.getAttribute("lazy-callback");t&&window[t]()};u||d||!i.getAttribute("lazy-src")?(y(),s()):(i.addEventListener("error",(function(){s(),t("cannot load url "+i.src)})),i.addEventListener("load",(()=>{y(),s()})),i.addEventListener("loadeddata",y));let m=i.getAttribute("lazy-video");m&&i.setAttribute("poster",m),i.preload="none";let f=i.getAttribute("lazy-embed");if(f)if(window.lazy()._data.isIE)i.setAttribute("src",f);else{let t=i.getAttribute("lazy-poster");t=t?"url('"+t+"')":"#000",i.setAttribute("srcdoc","<style>body{background: "+t+"; background-position: center; background-size: cover;}*{padding:0;margin:0;overflow:hidden}html,body{height:100%}img,span{position:absolute;width:100%;top:0;bottom:0;margin:auto}span{height:1.5em;text-align:center;font:48px/1.5 sans-serif;color:white;text-shadow:0 0 0.5em black}</style><a href='"+f+"'><span>â–¶</span></a>")}const b=i.getAttribute("lazy-src");b&&(i.src=b);const w=i.getAttribute("lazy-srcset");w&&i.setAttribute("srcset",w),i.removeAttribute("lazy-embed"),i.removeAttribute("lazy-poster"),i.removeAttribute("lazy-video"),i.removeAttribute("lazy-src"),null===i.getAttribute("lazy-reset")&&n.unobserve(i)}else if(null!=i.getAttribute("lazy-reset")&&!window.lazy().isIntersectingWithoutTransform(i)){function l(t,e){e&&t.classList.remove(e)}let t=i.getAttribute("lazy-animation"),e=i.getAttribute("lazy-animation-pointer");e&&t?document.querySelectorAll(e).forEach((function(e){l(e,t)})):l(i,t)}}))}),window.lazy().options);function e(){document.body.querySelectorAll(window.lazy().parameters.join(",")).forEach((function(t){i.observe(t)}))}window.lazyDatas.observer=i,document.addEventListener("DOMNodeInserted",e),document.addEventListener("change",e),e(),n="version "+window.lazy().version,console.info("[INFO] Lazy-attr : "+n)}else t("incompatible or verify window.lazy and window.lazyDatas integration");var n}))}));
