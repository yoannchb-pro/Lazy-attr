!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";var t=["[lazy-reset]","[lazy-animation]","[lazy-animation-time]","[lazy-animation-delay]","[lazy-src]","[lazy-video]","[lazy-embed]","[lazy-animation-pointer]","[lazy-animation-function]","[lazy-animation-count]","[lazy-callback]","[lazy-srcset]","[lazy-poster]","[lazy-size-width]","[lazy-size-height]","[lazy-background]"],e=["zoomin","zoomout","opacity","slide-left","slide-right","slide-bottom","slide-top","corner-top-left","corner-top-right","corner-bottom-left","corner-bottom-right","shake","rotate","blur","flip","flip-up"];var n={isIntersecting:function(t){var e=window.innerWidth,n=window.innerHeight,i=t.getBoundingClientRect(),o=!1,a=!1,r=i.top>=0&&i.top<=n,s=i.bottom>=0&&i.bottom<=n,l=i.left>=0&&i.left<=e,u=i.right>=0&&i.right<=e;return(r||s)&&(a=!0),(l||u)&&(o=!0),!(!o||!a)},isIntersectingWithoutTransform:function(t){var e=window.innerWidth,n=window.innerHeight;function i(t){var i=t.offsetParent.getBoundingClientRect(),o=i.left+t.offsetLeft,a=i.top+t.offsetTop,r=a+t.offsetHeight,s=o+t.offsetWidth,l=!1,u=!1;if((a>=0&&a<=n||r>=0&&r<=n)&&(u=!0),(o>=0&&o<=e||s>=0&&s<=e)&&(l=!0),l&&u)return!0}var o=t.getAttribute("lazy-animation-pointer");return i(t)||null!=o&&i(document.querySelector(o))}};function i(t,e,n){var i=t.getAttribute("lazy-reset");if(i=null!=i&&void 0!=i){var o=t.getAttribute("lazy-animation");if(o&&e){var a=t.getAttribute("lazy-animation-pointer");a?document.querySelectorAll(a).forEach(function(t){t.classList.remove(o)}):t.classList.remove(o),t.removeAttribute("lazy-animation")}t.setAttribute("lazy-animation",e),n&&(window.lazy()._data.observer.unobserve(t),window.lazy()._data.observer.observe(t))}else console.warn("Lazy-attr : Cannot change animation of not lazy-reset element !")}function o(t,e){t.style.animationPlayState=e}function a(t,e){if(window.lazy()._data.originalObserver){var n=t.getAttribute("lazy-animation");n&&e.classList.remove(n)}t.style.minWidth=null,t.style.minHeight=null,o(e,null),t.style.animationDuration=null,t.style.animationDelay=null,t.style.animationIterationCount=null,t.style.animationTimingFunction=null}function r(t,e,n){var i=t.getAttribute("lazy-animation-time");i&&(e.style.animationDuration=i+"s");var o=t.getAttribute("lazy-animation-delay");o&&(e.style.animationDelay=o+"s");var r=t.getAttribute("lazy-animation-count");r&&(e.style.animationIterationCount=r);var s=t.getAttribute("lazy-animation-function");s&&(e.style.animationTimingFunction=s),e.classList.add(n),null===t.getAttribute("lazy-reset")?e.addEventListener("animationend",function(){a(t,e),window.lazy().parameters.forEach(function(e){e=e.replace(/(\[|\])/gi,""),t.removeAttribute(e)})}):e.addEventListener("animationend",function(){a(t,e)})}window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),window.HTMLCollection&&!HTMLCollection.prototype.forEach&&(HTMLCollection.prototype.forEach=Array.prototype.forEach),window.lazyDatas={isIE:!!document.documentMode,originalObserver:!0},window.lazy=function(){return{_data:window.lazyDatas,changeAnimation:i,isIntersecting:n.isIntersecting,isIntersectingWithoutTransform:n.isIntersectingWithoutTransform,parameters:t,animations:e,options:{root:null,rootMargin:"0px",threshold:0},skeletons:["lazy-skeleton","lazy-skeleton-corner","lazy-skeleton-top"],version:"1.2.0"}},window.IntersectionObserver||(window.IntersectionObserver=function(t,e){this.callback=t,this.elements=[],this.options=e,window.lazyDatas.originalObserver=!1,this.initObs=function(){var e=this;function n(){var n=[];e.elements.forEach(function(t){var e=window.lazy().isIntersecting(t);n.push({target:t,isIntersecting:e})}),t(n,e)}this.listener=n;var i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame;i?function t(){n(),i(t)}():setInterval(n,100)},this.observe=function(t){t&&this.elements.push(t)},this.unobserve=function(t){if(t){var e=this.elements.indexOf(t);-1!=e&&this.elements.splice(e,1)}},this.initObs()}),window.addEventListener("load",function(){function t(t){console.error("[ERROR] Lazy-attr : "+t)}if(window.IntersectionObserver&&window.lazy()&&window.lazyDatas){var e=function(){document.body.querySelectorAll(window.lazy().parameters.join(",")).forEach(function(t){var e=t.getAttribute("lazy-size-width"),i=t.getAttribute("lazy-size-height");e&&(t.style.minWidth=e),i&&(t.style.minHeight=i),n.observe(t)})},n=new IntersectionObserver(function(e,n){e.forEach(function(e){var i=e.target;if(e.isIntersecting){var a=[],s=i.getAttribute("lazy-animation"),l=i.getAttribute("lazy-animation-pointer");l?document.querySelectorAll(l).forEach(function(t){s&&(r(i,t,s),o(t,"paused")),a.push(t)}):(s&&(r(i,i,s),o(i,"paused")),a.push(i));var u=i.complete&&0!==i.naturalHeight,c=i.readyState>=0,d=function(){var t=i.getAttribute("lazy-callback");t&&window[t](i)},y=function(){a.forEach(function(t){!function(t){-1!=t.classList.toString().indexOf("lazyattr")&&(t.classList.remove("lazyattr"),t.classList.add("lazyloaded"))}(t),o(t,"running"),window.lazy().skeletons.forEach(function(e){return t.classList.remove(e)})})};if(u||c||!i.getAttribute("lazy-src")&&!i.getAttribute("lazy-srcset")&&!i.getAttribute("lazy-background"))d(),y();else if(i.getAttribute("lazy-background")){var f=i.getAttribute("lazy-background");if(f){var m=new Image;m.src=f,m.addEventListener("error",function(){y(),t("cannot load url "+i.src)}),m.addEventListener("load",function(){i.style.backgroundImage="url('"+m.src+"')",d(),y()})}}else i.addEventListener("error",function(){y(),t("cannot load url "+i.src)}),i.addEventListener("load",function(){d(),y()}),i.addEventListener("loadeddata",d);var z=i.getAttribute("lazy-video");z&&i.setAttribute("poster",z),i.preload="none";var b=i.getAttribute("lazy-embed");if(b)if(window.lazy()._data.isIE)i.setAttribute("src",b);else{var g=i.getAttribute("lazy-poster");g=g?"url('"+g+"')":"#000",i.setAttribute("srcdoc","<style>body{background: "+g+"; background-position: center; background-size: cover;}*{padding:0;margin:0;overflow:hidden}html,body{height:100%}img,span{position:absolute;width:100%;top:0;bottom:0;margin:auto}span{height:1.5em;text-align:center;font:48px/1.5 sans-serif;color:white;text-shadow:0 0 0.5em black}</style><a href='"+b+"'><span>&#9654;</span></a>")}var v=i.getAttribute("lazy-src");v&&(i.src=v);var w=i.getAttribute("lazy-srcset");w&&i.setAttribute("srcset",w),i.removeAttribute("lazy-embed"),i.removeAttribute("lazy-poster"),i.removeAttribute("lazy-video"),i.removeAttribute("lazy-src"),i.removeAttribute("lazy-srcset"),i.removeAttribute("lazy-background"),null===i.getAttribute("lazy-reset")&&n.unobserve(i)}else if(null!=i.getAttribute("lazy-reset")&&!window.lazy().isIntersectingWithoutTransform(i)){var h=function(t,e){e&&t.classList.remove(e)},p=i.getAttribute("lazy-animation"),A=i.getAttribute("lazy-animation-pointer");A&&p?document.querySelectorAll(A).forEach(function(t){h(t,p)}):h(i,p)}})},window.lazy().options);window.lazyDatas.observer=n,document.addEventListener("DOMNodeInserted",e),e(),i="version "+window.lazy().version,console.info("[INFO] Lazy-attr : "+i)}else t("Incompatible or verify window.lazy and window.lazyDatas integration");var i})});
